#
# This file is auto-generated. DO NOT EDIT
# Generated by: autospec.py
#
# Source0 file verified with key 0xC5B4EE931A9F9DFD (codesign@isc.org)
#
%define keepstatic 1
Name     : bind-utils
Version  : 9.18.0
Release  : 114
URL      : https://downloads.isc.org/isc/bind9/9.18.0/bind-9.18.0.tar.xz
Source0  : https://downloads.isc.org/isc/bind9/9.18.0/bind-9.18.0.tar.xz
Source1  : https://downloads.isc.org/isc/bind9/9.18.0/bind-9.18.0.tar.xz.asc
Summary  : No detailed summary available
Group    : Development/Tools
License  : Apache-2.0 BSD-3-Clause ISC MPL-2.0
Requires: pypi(ply)
BuildRequires : doxygen
BuildRequires : e2fsprogs-dev
BuildRequires : krb5-dev
BuildRequires : libcap-dev
BuildRequires : libxml2-dev
BuildRequires : libxslt-bin
BuildRequires : openssl-dev
BuildRequires : perl
BuildRequires : pkgconfig(cmocka)
BuildRequires : pkgconfig(libidn2)
BuildRequires : pkgconfig(libmaxminddb)
BuildRequires : pkgconfig(libprotobuf-c)
BuildRequires : pkgconfig(libuv)
BuildRequires : pypi(ply)
BuildRequires : pypi-pytest
BuildRequires : readline-dev

%description
<!--
SPDX-License-Identifier: MPL-2.0
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0.  If a copy of the MPL was not distributed with this
file, you can obtain one at https://mozilla.org/MPL/2.0/.

%prep
%setup -q -n bind-9.18.0
cd %{_builddir}/bind-9.18.0

%build
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
export LANG=C.UTF-8
export SOURCE_DATE_EPOCH=1643306041
export GCC_IGNORE_WERROR=1
export CFLAGS="$CFLAGS -fno-lto -fstack-protector-strong -fzero-call-used-regs=used "
export FCFLAGS="$FFLAGS -fno-lto -fstack-protector-strong -fzero-call-used-regs=used "
export FFLAGS="$FFLAGS -fno-lto -fstack-protector-strong -fzero-call-used-regs=used "
export CXXFLAGS="$CXXFLAGS -fno-lto -fstack-protector-strong -fzero-call-used-regs=used "
%configure  --without-libxml2 \
--with-libtool \
--with-gssapi=krb5-config
make  %{?_smp_mflags}

%check
export LANG=C.UTF-8
export http_proxy=http://127.0.0.1:9/
export https_proxy=http://127.0.0.1:9/
export no_proxy=localhost,127.0.0.1,0.0.0.0
make %{?_smp_mflags} check

%install
export SOURCE_DATE_EPOCH=1643306041
rm -rf %{buildroot}
mkdir -p %{buildroot}/usr/share/package-licenses/bind-utils
cp %{_builddir}/bind-9.18.0/COPYING %{buildroot}/usr/share/package-licenses/bind-utils/4fa8d983d44984c7a1d7bbca6971242b10155776
cp %{_builddir}/bind-9.18.0/COPYRIGHT %{buildroot}/usr/share/package-licenses/bind-utils/c6980d83dfb865fc166ad4913abab8656d2ba2ae
cp %{_builddir}/bind-9.18.0/LICENSE %{buildroot}/usr/share/package-licenses/bind-utils/4fa8d983d44984c7a1d7bbca6971242b10155776
%make_install
## Remove excluded files
rm -f %{buildroot}*/usr/bin/bind9-config
rm -f %{buildroot}*/usr/bin/delv
rm -f %{buildroot}*/usr/bin/isc-config.sh
rm -f %{buildroot}*/usr/bin/lwresd
rm -f %{buildroot}*/usr/bin/named
rm -f %{buildroot}*/usr/bin/named-checkconf
rm -f %{buildroot}*/usr/bin/named-journalprint
rm -f %{buildroot}*/usr/bin/named-rrchecker
rm -f %{buildroot}*/usr/bin/rndc
rm -f %{buildroot}*/usr/bin/rndc-confgen
rm -f %{buildroot}*/usr/bin/tsig-keygen
rm -f %{buildroot}*/etc/bind.keys

%files
%defattr(-,root,root,-)
